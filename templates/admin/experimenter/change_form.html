{% extends 'admin/change_form.html' %}
{% load static %}

{% block admin_change_form_document_ready %}
{{ block.super }}
<script>
    var $ = django.jQuery;
    $(".form-row.field-ramp_up_ratio").hide();
    $("[id^=id_group_set-][id$=-control]").change(function() {
        $(this).parents(".inline-related.dynamic-group_set").siblings().find(".form-row.field-control")
            .find("input:checkbox").checked = false;
        if ($(this).is(":checked") == false) {
            $(this).parents(".inline-related.dynamic-group_set").siblings().find(".form-row.field-control").show();
            var ramp_up = $(this).parents(".module.aligned").find(".form-row.field-ramp_up")
            ramp_up.show();
            if (ramp_up.find(":radio:checked").val() == 'True') {
                $(this).parents(".module.aligned").find(".form-row.field-ramp_up_ratio").show();
                }
            } else {
            $(this).parents(".inline-related.dynamic-group_set").siblings().find(".form-row.field-control").hide();
            $(this).parents(".module.aligned").find(".form-row.field-ramp_up").hide();
            $(this).parents(".module.aligned").find(".form-row.field-ramp_up_ratio").hide();
            }
        });
    $("[id^=id_group_set-][id$=-ramp_up]").change(function() {
        if ($(this).find(":radio:checked").val() == 'True') {
            $(this).parents(".module.aligned").find(".form-row.field-ramp_up_ratio").show();
            } else {
            $(this).parents(".module.aligned").find(".form-row.field-ramp_up_ratio").hide();
            }
        });
</script>
{% endblock %}
